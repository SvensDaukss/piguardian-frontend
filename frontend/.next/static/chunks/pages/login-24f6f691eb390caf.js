(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[459],{6429:function(e,t,o){(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return o(2946)}])},2946:function(e,t,o){"use strict";o.r(t);var n=o(5893),r=o(7294),a=o(1163),i=o(4440),l=o(4246),s=o(9983),u=o(8163),c=o(9979),f=o(5098),d=o(3353),p=o(9305);let g=(0,f.Z)(i.Z)(e=>{let{theme:t}=e;return{backgroundColor:"#000511",color:"#fff",minHeight:"100vh",padding:t.spacing(4)}}),h=(0,f.Z)(l.Z)(e=>{let{theme:t}=e;return{textAlign:"left",marginBottom:t.spacing(2)}}),m=(0,f.Z)(i.Z)(e=>{let{theme:t}=e;return{marginTop:t.spacing(4)}}),b=(0,f.Z)(s.Z)(e=>{let{theme:t}=e;return{marginBottom:t.spacing(2),"& .MuiInputBase-root":{color:"#fff"},"& .MuiInputLabel-root":{color:"#fff"},"& .MuiOutlinedInput-root .MuiOutlinedInput-notchedOutline":{borderColor:"#fff"}}}),Z=(0,f.Z)(u.Z)(e=>{let{theme:t}=e;return{marginTop:t.spacing(2),backgroundColor:"#00bfa6",color:"#fff","&:hover":{backgroundColor:"#008c7a"}}}),v=(0,f.Z)(l.Z)(e=>{let{theme:t}=e;return{color:"red",marginBottom:t.spacing(2)}});t.default=()=>{let[e,t]=(0,r.useState)(""),[o,i]=(0,r.useState)(""),[l,s]=(0,r.useState)(""),{setIsLoggedIn:u}=(0,r.useContext)(p.V),f=(0,a.useRouter)();(0,r.useEffect)(()=>{"dashboard.piguardian.org"!==window.location.hostname&&(window.location.href="https://dashboard.piguardian.org/login")},[]);let w=async t=>{t.preventDefault();try{console.log("Submitting Login:",{email:e,password:o});let{token:t,uuid:n}=(await d.Z.post("/auth/login",{email:e,password:o})).data;localStorage.setItem("token",t),u(!0),f.push("/".concat(n))}catch(e){console.error("Login failed:",e.response?e.response.data:e.message),s("Login failed: "+(e.response?e.response.data.error:e.message))}};return(0,n.jsx)(g,{children:(0,n.jsxs)(c.Z,{maxWidth:"sm",children:[(0,n.jsx)(h,{variant:"h4",children:"Login"}),l&&(0,n.jsx)(v,{variant:"body2",children:l}),(0,n.jsxs)(m,{component:"form",onSubmit:w,children:[(0,n.jsx)(b,{variant:"outlined",fullWidth:!0,label:"Email",value:e,onChange:e=>t(e.target.value),InputLabelProps:{style:{color:"#fff"}},InputProps:{style:{color:"#fff"}}}),(0,n.jsx)(b,{variant:"outlined",fullWidth:!0,label:"Password",type:"password",value:o,onChange:e=>i(e.target.value),InputLabelProps:{style:{color:"#fff"}},InputProps:{style:{color:"#fff"}}}),(0,n.jsx)(Z,{type:"submit",variant:"contained",fullWidth:!0,children:"Login"})]})]})})}},3353:function(e,t,o){"use strict";let n=o(7066).Z.create({baseURL:"/api"});n.interceptors.request.use(e=>{let t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),t.Z=n}},function(e){e.O(0,[882,163,486,66,983,888,774,179],function(){return e(e.s=6429)}),_N_E=e.O()}]);